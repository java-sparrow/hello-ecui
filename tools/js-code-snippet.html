<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>js 代码片段/标准</title>
    <link rel="stylesheet" href="../dep/ecui/2.1.2/dist/ecui.css" />
    
    <script src="../dep/tangram/1.5.2/dist/tangram.js"></script>
    <script src="../dep/ecui/2.1.2/dist/ecui.js"></script>
</head>
<body>
    <h1>js 代码片段/标准</h1>
    
    <!-- 表格 -->
    <pre>
        表格的操作列js代码
        [
            '<a href="#" class="link-option" ',
            'data-itemData="', item.data, '">操作项名称</a>'
        ].join('');
        
        
        绑定表格操作列事件代码
        T.event.on(
            ecuiTable.getMain(),
            'click',
            function (e) {
                var target = T.event.getTarget(e);
                var itemIndex = T.dom.getAttr(target, 'data-itemIndex');
                
                //  绑定 表格操作列【option】功能 点击事件
                if (T.dom.hasClass(target, 'link-option')) {
                    var itemData = T.dom.getAttr(target, 'data-itemData');
                }
            }
        );
    </pre>
    
    
    <hr />
    
    
    <pre>
        require及引用初始化
        
        var Form = require('rf/form');
        var ajax = require('rf/ajax');
        
        var constant = require('common/constant');
        var ajaxURL = constant.ajaxURL;
        var ruleURL = constant.ruleURL;
    
        var util = require('common/util');
        var makeTiptool = util.dom.mackTiptool;
        
        <hr />
        
        view.element = T.dom.g('elementId');
        view.ecui = ecui.get('ecuiId');
        
        view.actionNamePostForm = new Form(
            T.dom.g('actionNamePostForm'),
            {
                url: ajaxURL.MOUDEL_ACTION,
                ruleURL: ruleURL.MOUDEL_ACTION
            }
        );
    </pre>
    
    
    <hr />
    
    
    <pre>
        批量设置select选项
        util.select.setData({
            ecuiSelect: view.ecuiSelect,
            dataList: data.dataList,
            filter: function (){
                
            }
        });
        
        <hr />
        
        发送ajax请求（通过From）
        view.actionNamePostForm.submit({
            onsubmit: function (reqParam) {
                reqParam.postParamName = 'new value';
            },
            onsuccess: function (data) {
                //  去掉页面上的验证错误信息
                view.actionNamePostForm.setError('');
            }
            // ,onfailure: function (ejsonObj) {}
        });
        
        发送简单ajax请求（不通过Form）
        ajax.post(
            ajaxURL.MOUDEL_ACTION,
            'reqParam=' + encodeURIComponent(T.json.stringify(
                {
                    param: value
                }
            )),
            function (data) {
                
            }
        );
        
        <hr />
        
        ecui.confirm(
            '<span class="text-warning">保存成功！</span>',
            function () {
                console.log('ok');
            },
            function () { console.log('cancel'); }
        );
        
        //  绑定【XXXX】按钮的点击事件
        view.ecui.onclick = function () {
            
        };
        
        <hr />
        
        探索ecui控件方法（打印参数值）
        function () {
            console.log(arguments);
        };
        
        
        T.array.each(items, function (item) {
            
        });
    </pre>
    
    
    <pre>
    模拟数据验证模板：
    
    验证规则模版：
    if (require('../feConfig/testConfig').getLocalValidate()) {
        return {
            "postName": [
                {
                    "type": "regexp",
                    "msg": "字段'postName'必须为整数类型",
                    "rule": "^(\\+|-)?[1-9]\\d*$"
                }
            ]
        };
    }
    else {
        return;
    }
    
    
    T.dom.addClass
    T.dom.removeClass
    T.dom.getAttr()
    T.dom.setAttr()
    T.dom.hide()
    </pre>
</body>
</html>
